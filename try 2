<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rejection Roulette</title>
  <meta name="description" content="Generate in-person rejection challenges, track streaks, and export your log. No login." />

  <!-- Favicon (tiny but makes it feel legit) -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéØ</text></svg>">

  <!-- html2canvas for share-card image capture -->
  <script defer src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <style>
    :root{
      --bg:#0b0f19; --card:#121a2a; --muted:#93a4c7; --text:#e8eefc;
      --accent:#7c5cff; --accent2:#36d399; --danger:#ff5c7a; --border:#21304d;
      --shadow: 0 10px 35px rgba(0,0,0,.35);
      --radius:18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:var(--sans); color:var(--text);
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(124,92,255,.35), transparent 60%),
        radial-gradient(900px 500px at 100% 0%, rgba(54,211,153,.25), transparent 55%),
        var(--bg);
      min-height:100vh;
    }
    a{color:inherit}
    .wrap{max-width:1100px; margin:0 auto; padding:28px 16px 60px}
    header{
      display:flex; align-items:flex-start; justify-content:space-between; gap:16px;
      margin-bottom:14px;
    }
    .brand{display:flex; flex-direction:column; gap:6px}
    .title{display:flex; align-items:center; gap:10px; font-size:22px; font-weight:900; letter-spacing:.2px}
    .pill{
      font-family:var(--mono);
      font-size:12px; color:rgba(232,238,252,.9);
      border:1px solid rgba(255,255,255,.12);
      padding:4px 8px; border-radius:999px;
      background:rgba(18,26,42,.55);
      white-space:nowrap;
    }
    .sub{color:var(--muted); font-size:14px; line-height:1.35; max-width:72ch}
    .grid{display:grid; grid-template-columns:1.25fr .75fr; gap:14px; margin-top:14px}
    @media (max-width: 980px){ .grid{grid-template-columns:1fr} header{flex-direction:column} }
    .card{
      background:linear-gradient(180deg, rgba(18,26,42,.92), rgba(18,26,42,.78));
      border:1px solid rgba(255,255,255,.10);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px;
    }
    .card h2{margin:0 0 10px; font-size:15px; letter-spacing:.2px}
    .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    .row > *{flex: 1 1 auto}
    label{display:block; font-size:12px; color:var(--muted); margin-bottom:6px}
    select, input[type="range"], input[type="text"], textarea{
      width:100%;
      background:rgba(11,15,25,.65);
      border:1px solid rgba(255,255,255,.12);
      color:var(--text);
      border-radius:12px;
      padding:10px 12px;
      outline:none;
    }
    textarea{min-height:88px; resize:vertical}
    .btn{
      appearance:none; border:0; cursor:pointer;
      padding:10px 12px;
      border-radius:12px;
      font-weight:800;
      color:var(--text);
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12);
      transition:transform .05s ease, background .15s ease;
      user-select:none;
    }
    .btn:hover{background:rgba(255,255,255,.12)}
    .btn:active{transform:translateY(1px)}
    .btn.primary{background:linear-gradient(90deg, rgba(124,92,255,.95), rgba(124,92,255,.7)); border-color:rgba(124,92,255,.6)}
    .btn.good{background:linear-gradient(90deg, rgba(54,211,153,.92), rgba(54,211,153,.65)); border-color:rgba(54,211,153,.55)}
    .btn.bad{background:linear-gradient(90deg, rgba(255,92,122,.92), rgba(255,92,122,.65)); border-color:rgba(255,92,122,.55)}
    .btn.small{padding:8px 10px; font-size:13px}
    .challenge{
      border:1px dashed rgba(255,255,255,.18);
      border-radius:16px;
      padding:14px;
      background:rgba(11,15,25,.45);
    }
    .challenge .headline{display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap}
    .challenge .text{font-size:18px; font-weight:900; margin:8px 0 6px; line-height:1.25}
    .challenge .meta{display:flex; gap:8px; flex-wrap:wrap; color:var(--muted); font-size:12px}
    .tag{
      border:1px solid rgba(255,255,255,.12);
      background:rgba(18,26,42,.55);
      padding:3px 8px;
      border-radius:999px;
      font-family:var(--mono);
      font-size:12px;
    }
    .statgrid{display:grid; grid-template-columns:repeat(3,1fr); gap:10px}
    @media (max-width: 520px){ .statgrid{grid-template-columns:1fr} }
    .stat{
      padding:12px;
      border-radius:14px;
      background:rgba(11,15,25,.45);
      border:1px solid rgba(255,255,255,.10);
    }
    .stat .k{font-size:11px; color:var(--muted)}
    .stat .v{font-size:20px; font-weight:1000; margin-top:4px}
    table{width:100%; border-collapse:collapse; margin-top:8px; font-size:13px}
    th,td{padding:10px 8px; border-bottom:1px solid rgba(255,255,255,.08); vertical-align:top}
    th{color:var(--muted); font-weight:800; text-align:left; font-size:12px}
    .muted{color:var(--muted)}
    .toast{
      position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
      background:rgba(18,26,42,.92);
      border:1px solid rgba(255,255,255,.12);
      padding:10px 12px; border-radius:999px;
      box-shadow:var(--shadow);
      display:none;
      font-size:13px;
      z-index:9999;
      max-width:min(92vw, 720px);
      text-align:center;
    }
    .footer{
      margin-top:14px;
      color:var(--muted);
      font-size:12px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .kbd{
      font-family:var(--mono);
      border:1px solid rgba(255,255,255,.14);
      background:rgba(11,15,25,.55);
      padding:2px 6px;
      border-radius:8px;
    }

    /* Share card look */
    .shareCard{
      border-radius:18px;
      border:1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(900px 400px at 0% 0%, rgba(124,92,255,.28), transparent 60%),
        radial-gradient(900px 400px at 100% 0%, rgba(54,211,153,.20), transparent 60%),
        rgba(11,15,25,.55);
      padding:14px;
    }
    .shareCard .top{
      display:flex; justify-content:space-between; gap:10px; align-items:flex-start; flex-wrap:wrap;
    }
    .shareCard .app{
      font-weight:1000; letter-spacing:.2px; display:flex; gap:8px; align-items:center;
    }
    .shareCard .big{
      font-size:18px; font-weight:1000; margin:10px 0 8px; line-height:1.25;
    }
    .shareCard .small{
      font-size:12px; color:var(--muted); display:flex; gap:8px; flex-wrap:wrap; align-items:center;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="title">üéØ Rejection Roulette <span class="pill">public ‚Ä¢ no login ‚Ä¢ shareable ‚Ä¢ exportable</span></div>
        <div class="sub">
          Generate an in-person ‚Äúask‚Äù designed to make you a little uncomfortable (politely). Log what happened, build a rejection streak, export proof.
        </div>
      </div>
      <div class="row" style="justify-content:flex-end; min-width:280px">
        <button class="btn small" id="resetBtn" title="Clears logs + streak">Reset</button>
        <button class="btn small" id="exportBtn" title="Download CSV of your logs">Export CSV</button>
        <button class="btn small" id="shareAppBtn" title="Share the app">Share App</button>
      </div>
    </header>

    <!-- How it works + Rules -->
    <div class="grid" style="grid-template-columns:1fr 1fr; margin-top:0">
      <div class="card">
        <h2>How it works</h2>
        <div class="muted" style="line-height:1.5">
          1) Pick a pack + difficulty ‚Üí 2) Generate a challenge (or use ‚ÄúToday‚Äôs‚Äù) ‚Üí 3) Do it <b>in person</b> ‚Üí
          4) Log <b>Accepted</b> or <b>Rejected</b> ‚Üí 5) Your streak counts only on days you logged at least one <b>rejection</b>.
        </div>
      </div>
      <div class="card">
        <h2>Safety rules (no-jerk policy)</h2>
        <ul class="muted" style="margin:0; padding-left:18px; line-height:1.5">
          <li>Be respectful, brief, and specific.</li>
          <li>‚ÄúNo‚Äù ends it. No arguing. No guilt.</li>
          <li>Consent required for photos/videos.</li>
          <li>Don‚Äôt block people working / in a rush.</li>
          <li>Pick challenges that are safe + legal in your setting.</li>
        </ul>
      </div>
    </div>

    <div class="grid">
      <!-- Left: Generator + Logger -->
      <div class="card">
        <h2>New challenge</h2>

        <div class="row">
          <div style="min-width:220px">
            <label for="pack">Challenge pack</label>
            <select id="pack">
              <option value="all" selected>All (mixed)</option>
              <option value="beginner">Beginner Pack</option>
              <option value="networking">Networking Pack</option>
              <option value="wholesome">Wholesome Chaos Pack</option>
              <option value="negotiation">Negotiation Pack</option>
            </select>
          </div>

          <div style="min-width:220px">
            <label for="category">Category</label>
            <select id="category">
              <option value="any">Any</option>
              <option value="food">Food & caf√©</option>
              <option value="social">Social & compliments</option>
              <option value="help">Asking for help</option>
              <option value="negotiation">Negotiation</option>
              <option value="weird">Wholesome-weird</option>
              <option value="career">Career & networking</option>
            </select>
          </div>

          <div style="min-width:220px">
            <label for="difficulty">Difficulty: <span id="diffLabel" class="pill">3</span></label>
            <input id="difficulty" type="range" min="1" max="5" value="3" />
          </div>

          <div style="min-width:220px">
            <label for="timebox">Timebox (minutes)</label>
            <select id="timebox">
              <option value="0">No timer</option>
              <option value="5">5</option>
              <option value="10">10</option>
              <option value="15" selected>15</option>
              <option value="30">30</option>
            </select>
          </div>
        </div>

        <div class="challenge" style="margin-top:
